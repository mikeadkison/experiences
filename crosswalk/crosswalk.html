<!DOCTYPE html>

<!-- / todo: alternate between adding cool trippy effects and making art
/ ideas: fancy musem frames around games ( intricate and hand-made,not just photos), weird canvs sizes and ratios, float planes flying in, links to other gmaes embedded in games 
multiple tiny phaser canvases per page with cute little ai making the page magical and alive-->
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
    <link rel="stylesheet" href="crosswalk.css">
</head>
<body>
    <img class="frame" src="frame.png">
    <script>
    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 200 }
            }
        },
        scene: {
            preload: preload,
            create: create
        },
        pixelArt: true
    };

    var game = new Phaser.Game(config);
    var gameWidth = game.config.width;
    var gameHeight = game.config.height;


    function preload () {
        this.load.image('signal', 'signal.png');
        this.load.image('background', 'background.png');
        this.load.image('deadEnd', 'deadEnd.png');
        this.load.spritesheet('signalSheet', 'signal.png', {frameWidth: 16, frameHeight: 49})
    }

    function create ()
    {
        this.cameras.main.backgroundColor.setTo(100,150,229);
        var backgroundImage = this.add.sprite(gameWidth / 2, gameHeight / 2, 'background');
        backgroundImage.displayWidth = gameWidth;
        backgroundImage.scaleY = backgroundImage.scaleX;
        var deadEndSprite = scale(this.add.sprite(240, 140, 'deadEnd'));
        var signalSprite = scale(this.add.sprite(400, 200, 'signalSheet'));

        this.anims.create({
            key: 'signalChange',
            frames: this.anims.generateFrameNames('signalSheet', {start: 0, end: 1}),
            frameRate: 2,
            repeat: -1,
        })
        signalSprite.play('signalChange');

    }

    function scale(thing) {
        thing.scaleX = 5;
        thing.scaleY = thing.scaleX;
        return thing;
    }
    </script>

</body>
</html>