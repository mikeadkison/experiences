<!DOCTYPE html>

<!-- / todo: alternate between adding cool trippy effects and making art
/ ideas: fancy musem frames around games ( intricate and hand-made,not just photos), weird canvs sizes and ratios, float planes flying in, links to other gmaes embedded in games 
multiple tiny phaser canvases per page with cute little ai making the page magical and alive-->
<!-- todo: enforce a pixel grid system based on the pixel scaling -->
<!-- idea: clouds that move vertically instead of horizontally or arrang eto form shape -->
<!-- clouds further away should move slower in 2d -->
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
    <link rel="stylesheet" href="crosswalk.css">
</head>
<body>
    <img class="frame" src="frame.png">
    <script>
    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 200 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        },
        pixelArt: true
    };

    var game = new Phaser.Game(config);
    var gameWidth = game.config.width;
    var gameHeight = game.config.height;

    var cloud0;

    function preload () {
        this.load.image('signal', 'signal.png');
        this.load.image('background', 'background.png');
        this.load.image('cloud0', 'cloud0.png');
        this.load.spritesheet('signalSheet', 'signal.png', {frameWidth: 16, frameHeight: 49})
    }

    function create ()
    {
        this.cameras.main.backgroundColor.setTo(100,150,229);
        cloud0 = scale(this.add.sprite(180, 170, 'cloud0'));
        var backgroundImage = this.add.sprite(gameWidth / 2, gameHeight / 2, 'background');
        backgroundImage.displayWidth = gameWidth;
        backgroundImage.scaleY = backgroundImage.scaleX;
        var signalSprite = scale(this.add.sprite(400, 200, 'signalSheet'));
        

        this.anims.create({
            key: 'signalChange',
            frames: this.anims.generateFrameNames('signalSheet', {start: 0, end: 1}),
            frameRate: .1,
            repeat: -1,
        })
        signalSprite.play('signalChange');
    }

    function update (time, delta) {
        cloud0.x += .005 * delta;
        if (cloud0.x > 1000) {
            cloud0.x = -100;
        }
    }

    function scale(thing) {
        thing.scaleX = 5;
        thing.scaleY = thing.scaleX;
        return thing;
    }
    </script>

<iframe class="music" width="300" height="24" src="https://www.youtube.com/embed/oId6WDE8MiI?&autoplay=1 " frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

</body>
</html>